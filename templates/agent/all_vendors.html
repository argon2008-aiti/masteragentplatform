{% extends "base.html" %}
{% load widget_tweaks %}
{% load humanize %}
{% block subnav %}
{% include "vendors_subnav.html" %}
{% endblock %}
{% block contents %}
<div class="container main-contents">
    <div class="section">
	    <div class="section-header">
		    <p class="section-title">All Vendors <span class="badge vendor-total">0</span></p>
	    </div>
	    <div class="section-data">
		    <div class="vendor-list row">
			    
		    
		    
		    </div>
            </div>
    </div>
</div>

<script type="text/javascript">
	$(document).ready(function(){
		$("#vendors-link").addClass("active");
		$("#vendor-all").addClass("active");
		$.ajax({
	            type: 'GET',
		    url: "{% url 'vendors:all-json'%}",	    
		    dataType: 'json',
		    success: function(data){
			    $(".badge.vendor-total").html(data.length);
			    console.log(data);
			    $.each(data, function(i, vendor) {
			        var link = "/agent/vendors/details/" + vendor.pk; 
				$(".section-data > .row").append('<div class="col-xsm-6 col-sm-6 col-md-4 col-lg-3"><div class="thumbnail"><a href=' + link + '><img class=vendor-profile src=/'+vendor.fields.profile+'><div class="caption"><p class=vendor-name>'+vendor.fields.first_name+ " "+ vendor.fields.last_name+ '</p></div></div></div>')
			    }) 
		    }
		})
	})
</script>
{% endblock %}

