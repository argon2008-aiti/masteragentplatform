{% extends "base.html" %}
{% load widget_tweaks %}
{% load humanize %}
{% load dict_filter %}
{% load list_filter %}
{% block subnav %}
{% include "sales_subnav.html" %}
{% endblock %}
{% block contents %}
<div class="container main-contents booking-container">
    <div class="section">
	    <div class="section-header">
	          <p class="section-title">All Bookings</p>
	    </div>
	    <div class="section-data booking-list">
                 {% regroup object_list by date as sales %}
                   {% for daily_sale in sales %}
		   <div class=day-header>
		   <h3 class=day-name>{{daily_sale.grouper}} <span class="badge purchase-count">{{daily_sale.list|length}}</span></h3>
		   {% comment %}
		   {% with day=daily_sale.grouper %}
		   <h3 class=day-total>GHS {{month_sum_dict|get_item:month|get_from_index:0}} ({{month_sum_dict|get_item:month|get_from_index:1|floatformat:2}}%)</h3>
		   {% endwith %}
		   {% endcomment %}
                   </div>

		    <table class="stripe cell-border bookings-table" cellspacing="0"  width="100%">
			    <thead>
				<tr>
					<th></th>
					<th colspan=3 class="product-label">FANYOGO Pouch</th>
					<th colspan=3 class="product-label">FANCHOCO Pouch</th>
					<th colspan=3 class="product-label">FANICE Pouch</th>
					<th colspan=3 class="product-label">FANDANGO Pouch</th>
					<th colspan=3 class="product-label">FANDANGO 500ml</th>
					<th colspan=3 class="product-label">FANPOP</th>
					<th colspan=3 class="product-label">FANYOGO MP</th>
					<th></th>
					<th></th>
					<th></th>
				</tr>
				<tr>
					<th>VENDOR</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>bookings</th>
					<th>returns</th>
					<th>sales</th>

					<th>TOTAL</th>
					<th>EDIT</th>
					<th>STATUS</th>

				</tr>
			    </thead>
			    <tbody>
				    {% for sale in daily_sale.list %}
				<tr>
					<td>{{sale}}</td>
				        {% with v_booking=sale.pk %}
					{% for item in daily_sales_dict|get_item:v_booking %}
					<td>{{item}}</td>
					{% endfor %}
					<td class="sales-total"></td>
					<td><input type="button" class="btn btn-primary" value=Edit></td>
					<td><input type="button" class="btn btn-danger" value=Close></td>
					{% endwith %}
				</tr>
				{% endfor %}
			    </tbody>
		    </table>
		    {% endfor %}
            </div>
    </div>
</div>

<script type="text/javascript">
	$(document).ready(function(){
		$("#sales-link").addClass("active");
		$("#sales-bookings").addClass("active");

		var table = $(".bookings-table").DataTable({
	              searching: false,
	              paging: false,	      
	              info: false,	      
		      scrollX: true,
		      scrollCollapse: true,
		      fixedColumns: {
		         leftColumns: 1,
			 rightColumns: 3 
		      },
		      columnDefs:[{
			 targets: [-1, -2],
			 orderable: false
		      }]
		});
	})
</script>
{% endblock %}

